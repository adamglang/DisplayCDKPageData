(function e(r,n,t){function a(i,u){if(!n[i]){if(!r[i]){var c=typeof require=="function"&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[i]={exports:{}};r[i][0].call(s.exports,function(e){var n=r[i][1][e];return a(n?n:e)},s,s.exports,e,r,n,t)}return n[i].exports}var o=typeof require=="function"&&require;for(var i=0;i<t.length;i++)a(t[i]);return a})({1:[function(e,r,n){"use strict";function t(e,r){return Object.prototype.hasOwnProperty.call(e,r)}r.exports=function(e,r,n,o){r=r||"&";n=n||"=";var i={};if(typeof e!=="string"||e.length===0){return i}var u=/\+/g;e=e.split(r);var c=1e3;if(o&&typeof o.maxKeys==="number"){c=o.maxKeys}var f=e.length;if(c>0&&f>c){f=c}for(var s=0;s<f;++s){var l=e[s].replace(u,"%20"),d=l.indexOf(n),v,y,p,h;if(d>=0){v=l.substr(0,d);y=l.substr(d+1)}else{v=l;y=""}p=decodeURIComponent(v);h=decodeURIComponent(y);if(!t(i,p)){i[p]=h}else if(a(i[p])){i[p].push(h)}else{i[p]=[i[p],h]}}return i};var a=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],2:[function(e,r,n){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};r.exports=function(e,r,n,u){r=r||"&";n=n||"=";if(e===null){e=undefined}if(typeof e==="object"){return o(i(e),function(i){var u=encodeURIComponent(t(i))+n;if(a(e[i])){return o(e[i],function(e){return u+encodeURIComponent(t(e))}).join(r)}else{return u+encodeURIComponent(t(e[i]))}}).join(r)}if(!u)return"";return encodeURIComponent(t(u))+n+encodeURIComponent(t(e))};var a=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function o(e,r){if(e.map)return e.map(r);var n=[];for(var t=0;t<e.length;t++){n.push(r(e[t],t))}return n}var i=Object.keys||function(e){var r=[];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))r.push(n)}return r}},{}],3:[function(e,r,n){"use strict";n.decode=n.parse=e("./decode");n.encode=n.stringify=e("./encode")},{"./decode":1,"./encode":2}],4:[function(e,r,n){"use strict";var t=e("./hydraLinkGenerator");var a=e("./hydraLinkProcessor");var o=e("./renderView");(function(){return t.hydraLinkGenerator.getUrl().then(function(e){return t.hydraLinkGenerator.generate(e)}).then(function(e){return a.hydraLinkProcessor.process(e)}).then(function(e){return o.renderView.render(e)}).catch(function(e){return console.log(e)})})()},{"./hydraLinkGenerator":5,"./hydraLinkProcessor":6,"./renderView":7}],5:[function(e,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(e,t.key,t)}}return function(r,n,t){if(n)e(r.prototype,n);if(t)e(r,t);return r}}();function a(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(){a(this,e)}t(e,[{key:"generate",value:function e(r){var n=this;return this.sendRequest(r).then(function(e){return n.getHref(e)}).catch(function(e){console.log(e);throw new Error(e)})}},{key:"sendRequest",value:function e(r){return new Promise(function(e,n){if(!window.XMLHttpRequest){throw new Error("This browser does not support XMLHttpRequest")}var t=new XMLHttpRequest;t.open("GET",r);t.onload=function(){return e(t.responseText)};t.onerror=function(){return n("AJAX call failed with error "+t.status+": "+t.statusText)};t.send()})}},{key:"getUrl",value:function e(){return new Promise(function(e,r){return chrome.tabs.query({active:true,lastFocusedWindow:true},function(n){return n[0].url?e(n[0].url+"?debug"):r("chrome api did not find a tab")})})}},{key:"getHref",value:function e(r){var n=document.createElement("html");n.innerHTML=r;return n.querySelector("a").href}}]);return e}();var i=n.hydraLinkGenerator=new o},{}],6:[function(e,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.hydraLinkProcessor=undefined;var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(e,t.key,t)}}return function(r,n,t){if(n)e(r.prototype,n);if(t)e(r,t);return r}}();var a=e("querystring");var o=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function u(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(){u(this,e)}t(e,[{key:"process",value:function e(r){return{hydraLink:r,localLink:this.localLink(r),pageData:this.parseHydraLink(r)}}},{key:"localLink",value:function e(r){var n=r.indexOf("/route/");var t=r.substring(n);return"localhost:8082"+t}},{key:"parseHydraLink",value:function e(r){var n=decodeURIComponent(r);var t=n.substr(n.indexOf("?search=")).replace("debug=&pageName=","");var a=this.sanitizePayload(t);var i=o.default.parse(a);var u={};var c=true;var f=false;var s=undefined;try{for(var l=Object.keys(i)[Symbol.iterator](),d;!(c=(d=l.next()).done);c=true){var v=d.value;u[v]=this.catchMalformedJSONParse(i[v])}}catch(e){f=true;s=e}finally{try{if(!c&&l.return){l.return()}}finally{if(f){throw s}}}return u}},{key:"sanitizePayload",value:function e(r){var n=["debug=&pageName="];var t=true;var a=false;var o=undefined;try{for(var i=n[Symbol.iterator](),u;!(t=(u=i.next()).done);t=true){var c=u.value;r=r.replace(c,"")}}catch(e){a=true;o=e}finally{try{if(!t&&i.return){i.return()}}finally{if(a){throw o}}}return r}},{key:"catchMalformedJSONParse",value:function e(r){try{JSON.parse(r)}catch(e){return"This data has an invalid format: "+r}return JSON.parse(r)}}]);return e}();var f=n.hydraLinkProcessor=new c},{querystring:3}],7:[function(e,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(e,t.key,t)}}return function(r,n,t){if(n)e(r.prototype,n);if(t)e(r,t);return r}}();function a(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(){a(this,e)}t(e,[{key:"render",value:function e(r){console.log(r);var n=document.getElementById("mountPoint");n.innerHTML=this.template(r)}},{key:"template",value:function e(r){var n=JSON.stringify(r.pageData,null,4);return'\n            <div id="renderedData">\n                <div id="hydraLinks">\n                    <a href="'+r.hydraLink+'" target="_blank">Direct Hydra Link</a>\n                    <a href="'+r.localLink+'" target="_blank">Local Context Link</a>\n                </div>\n                <heading>Page Data:</heading>\n                <pre id="pageData">'+n+"</pre>\n            </div>\n        "}}]);return e}();var i=n.renderView=new o},{}]},{},[4]);